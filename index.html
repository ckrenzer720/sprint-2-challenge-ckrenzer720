<!DOCTYPE html>
<html lang="en">

<head>
  <title>Web Sprint 2 Challenge</title>
  <script id="challenge">
    // ðŸ‘‰ CHALLENGE 1
    // Implement the profileActivation function to manage the activation status of user profiles on a company's website. 
    // This function will toggle a profile's active status and handle reasons for inactivity.
      // if the `active` prop is true and inactive if the `active` prop is false
      // If the `active` prop is false, a `reason` prop must be present (i.e., not undefined)
      // 1. If the input profile is **active**, set it to **inactive** and assign the provided `reason` to the profile. The updated profile should be returned.
      // 2. If the input profile is **inactive**, set it to **active** and remove the `reason` property from the profile. The updated profile should be returned.
      // 3. If a profile passed in is active and no `reason` is provided, return `"confirm status manually"` and do not modify the profile.
    function profileActivation(profile, reason) {
      //for loop to check profile
      // if "active" === true --> set to "inactive" and set a 'reason' -- updated profile should be returned
      // if "inactive" === false --> set to 'active' remove the 'reason' -- updated profile should be returned
       if (profile.active === true && reason === undefined) {
        return "confirm status manually"
       }
       if (profile.active === true) {
        profile.active = false;
        profile.reason = reason;
        return profile
       }
       if (profile.active === false) {
        profile.active = true;
        delete profile.reason;
        return profile
       }
    }

    // ðŸ‘‰ CHALLENGE 2
    // Develop the `mineSweeper` function that evaluates a player's move in a grid-based minefield game. 
    // The function should analyze the grid position based on provided coordinates and determine if the player has landed on a safe spot or a mine.
        // - **grid:** An array of arrays representing the game grid.
                                      //         [                  
                                      //   ["ðŸŸ¥", "ðŸŸ¦", "ðŸŸ¥"], 
                                      //   ["ðŸŸ¦", "ðŸŸ¥", "ðŸŸ¥"],
                                      //   ["ðŸŸ¥", "ðŸŸ¦", "ðŸŸ¦"] 
                                      // ]
        // - **x:** The x-coordinate (horizontal position) in the grid.
        // - **y:** The y-coordinate (vertical position) in the grid.
        // The grid is interpreted with `x` and `y` coordinates ranging from 1 to 3.
        //     - `x = 1` and `y = 1` represents the top-left square.
        //     - `x = 3` and `y = 1` represents the top-right square.
        //     - `x = 3` and `y = 3` represents the bottom-right square.
        // ## Requirements
        //     1. If the coordinates land on a red square ("ðŸŸ¥"), return `"ðŸŸ¥ ðŸ’€"`.
        //     2. If the coordinates land on a blue square ("ðŸŸ¦"), return `"ðŸŸ¦ ðŸ¥³"`.
        //     3. If `x` _or_ `y` is less than 1 or greater than 3, return `"invalid coordinates"`.
    function mineSweeper(grid, x, y) {
      // array with sub arrays
    
      if (1 > x || 3 < x || 1 > y || 3 < y) {
            return "invalid coordinates";
          }
          
          idx1 = y - 1;
          idx2 = x - 1;
          
          let spot = grid[idx1][idx2];

          if (spot === "ðŸŸ¥") {
            return "ðŸŸ¥ ðŸ’€"
          } else {
            return "ðŸŸ¦ ðŸ¥³"
          }
    }

    // ðŸ‘‰ CHALLENGE 3
    // Develop the `booleanize` function so it transforms an object's properties based on the criteria listed (see requirements below). 
    // This function will loop over each property in the object and apply certain transformations to its values, while also handling edge cases related to property names.
          // 1. Transform any value of zero (`0`) into the boolean `false`.
          // 2. Transform any value of one (`1`) into the boolean `true`.
          // 3. If a value is `null`, delete the entire key-value pair from the object.
          // 4. If any _property_ name exceeds 9 characters, return the string `"shorten all prop names to 9 chars or less"`.
    function booleanize(obj) {

      for (let prop in obj) {
        if (obj[prop] === 0) {
          obj[prop] = false
        }
        if (obj[prop] === 1) {
          obj[prop] = true
        }
        if (obj[prop] === null) {
          delete obj[prop]
        }
        if (prop.length > 9) {
          return "shorten all prop names to 9 chars or less";
        }
      } 
      return obj
    }

    // ðŸ‘‰ CHALLENGE 4
    // Develop the `scrub` function that takes a string of text and an array of forbidden words. 
    // The function will replace any forbidden word in the text with a string of lowercase "x" characters, each "x" replacing one letter of the forbidden word. 
    // The modified text is then returned from the function.
        // 1. Replace each word in `text` that is included in the `forbidden` array with a string of "x" characters of equal length to the forbidden word.
        // 2. Ensure no punctuation is used in the text.
        // 3. If `text` is empty or there are no forbidden words, return the original text.
    function scrub(text, forbidden) {
      //check if text is empty or there are no forbidden words
      if (text.length === 0 || forbidden.length === 0) {
        return text
      }
      //new variable to not overwrite original text
      let newText = text
      //variable to seperate each individual word from the 'text' string
      let splitStr = text.split(" ")
      // console.log(splitStr)
      // loop over splitStr for forbidden words
      for (let i = 0; i < splitStr.length; i++) {
        //readability purposes
        word = splitStr[i];
        // console.log(word)
      //check if each word is forbidden and if it is, replace its length with 'x'
      //check if the forbidden array contains text word
          if (forbidden.includes(word)) {
            replaceWord = "";
              for (let j = 0; j < word.length; j++) {
                replaceWord += "x"
              }
            //if text is forbidden, replace with 'x' of the length of word
            //replace previous word with x'd word in splitStr
            // console.log("==============")
            newText = newText.replace(word, replaceWord)
            // console.log("==============")
          } 
        }
      return newText
    }

    // ðŸ‘‰ CHALLENGE 5 (bonus, NOT graded)
    // Create the `normalizePhoneNumber` function that takes a string representing a ten-digit number and returns it formatted in a specific phone number format.
        // 1. Format the input string `num` into the phone number format: "(XXX) XXX-XXXX".
        // 2. You can assume that all entries will be exactly 10 digits long.
    function normalizePhoneNumber(num) {

    }

    // ðŸ‘‰ CHALLENGE 6 (bonus, NOT graded)
    // Develop the `diceRolls` function that simulates the rolling of a six-sided die. 
    // It should continue rolling until it gets three sixes in a row, and then return the total number of rolls it took to achieve this.
        // 1. Simulate rolling a six-sided die.
        // 2. Continue rolling until three consecutive rolls result in a six.
        // 3. Return the total number of rolls it took to achieve three consecutive sixes.
      // ### Implementation Hints
            // - Utilize `Math.random` to simulate each die roll, ensuring it returns a number from 1 to 6. 
            //     You can read about how `Math.random` works [here](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/random).
            // - Implement a `while(true)` loop to roll the dice indefinitely.
            // - Keep track of the total number of rolls (`throws`) and the consecutive number of sixes (`counter`).
            // - Break out of the loop once three consecutive sixes are rolled to avoid an infinite loop.
    function diceRolls() {

    }

    // ðŸ§ª DO NOT make any changes below this line ===================
    globalThis.challengeVersion = 1
    globalThis.profileActivation = profileActivation
    globalThis.mineSweeper = mineSweeper
    globalThis.booleanize = booleanize
    globalThis.scrub = scrub
  </script>
  <style>
    .widget {
      padding: 0 0 0.5rem 0.65rem;
      margin-bottom: 0.5rem;
      border: 1px solid black;
      border-radius: 0.5rem;
    }

    .widget p {
      font-size: 0.75rem;
      font-style: italic;
    }

    .row>div {
      display: inline-block;
      background-color: lightgrey;
      border: 1px solid grey;
      width: 2rem;
      height: 2rem;
      cursor: pointer;
    }

    #outcome {
      font-size: 3rem;
    }
  </style>
</head>

<body>
  <h1>Web Sprint 2 Challenge </h1>
  <p>Open this HTML document in VSCode to find your challenges</p>
  <!-- widgets start -->
  <section class="widget">
    <p>Click on a square! (this widget uses the mineSweeper function)</p>
    <div class="row" id="row1">
      <div></div>
      <div></div>
      <div></div>
    </div>
    <div class="row" id="row2">
      <div></div>
      <div></div>
      <div></div>
    </div>
    <div class="row" id="row3">
      <div></div>
      <div></div>
      <div></div>
    </div>
    <span id="outcome"></span>
  </section>
  <form class="widget">
    <p>Type a ten-digit number! (this widget uses the normalizePhoneNumber function)</p>
    <input type="text" id="phoneNumInput" maxlength="10" />
    <span id="normalized"></span>
  </form>
  <!-- widgets end -->

  <!-- The following script loads from the Internet a library called Lodash that helps with testing -->
  <script id="lodash" src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.21/lodash.min.js"></script>
  <!-- The following script executes the tests you see when you open the Console in Chrome -->
  <script id="tests">
    runTests('CHALLENGE 1 - profileActivation', profileActivation, [
      [[{ active: true }], 'confirm status manually'],
      [[{ active: true }, 'because'], { active: false, reason: 'because' }],
      [[{ active: false, reason: 'because' }], { active: true }],
    ])
    runTests('CHALLENGE 2 - mineSweeper', mineSweeper, [
      [[[["ðŸŸ¥", "ðŸŸ¦", "ðŸŸ¥"], ["ðŸŸ¦", "ðŸŸ¥", "ðŸŸ¥"], ["ðŸŸ¥", "ðŸŸ¦", "ðŸŸ¦"]], 0, 4], "invalid coordinates"],
      [[[["ðŸŸ¥", "ðŸŸ¦", "ðŸŸ¥"], ["ðŸŸ¦", "ðŸŸ¥", "ðŸŸ¥"], ["ðŸŸ¥", "ðŸŸ¦", "ðŸŸ¦"]], 0, 1], "invalid coordinates"],
      [[[["ðŸŸ¥", "ðŸŸ¦", "ðŸŸ¥"], ["ðŸŸ¦", "ðŸŸ¥", "ðŸŸ¥"], ["ðŸŸ¥", "ðŸŸ¦", "ðŸŸ¦"]], 1, 4], "invalid coordinates"],
      [[[["ðŸŸ¦", "ðŸŸ¦", "ðŸŸ¥"], ["ðŸŸ¦", "ðŸŸ¦", "ðŸŸ¦"], ["ðŸŸ¦", "ðŸŸ¦", "ðŸŸ¥"]], 1, 1], "ðŸŸ¦ ðŸ¥³"],
      [[[["ðŸŸ¦", "ðŸŸ¥", "ðŸŸ¦"], ["ðŸŸ¦", "ðŸŸ¦", "ðŸŸ¦"], ["ðŸŸ¥", "ðŸŸ¦", "ðŸŸ¥"]], 2, 1], "ðŸŸ¥ ðŸ’€"],
      [[[["ðŸŸ¥", "ðŸŸ¦", "ðŸŸ¥"], ["ðŸŸ¥", "ðŸŸ¥", "ðŸŸ¦"], ["ðŸŸ¥", "ðŸŸ¥", "ðŸŸ¦"]], 3, 1], "ðŸŸ¥ ðŸ’€"],
      [[[["ðŸŸ¥", "ðŸŸ¦", "ðŸŸ¦"], ["ðŸŸ¥", "ðŸŸ¦", "ðŸŸ¥"], ["ðŸŸ¦", "ðŸŸ¦", "ðŸŸ¦"]], 1, 2], "ðŸŸ¥ ðŸ’€"],
      [[[["ðŸŸ¥", "ðŸŸ¥", "ðŸŸ¥"], ["ðŸŸ¥", "ðŸŸ¦", "ðŸŸ¥"], ["ðŸŸ¦", "ðŸŸ¥", "ðŸŸ¦"]], 2, 2], "ðŸŸ¦ ðŸ¥³"],
      [[[["ðŸŸ¥", "ðŸŸ¦", "ðŸŸ¦"], ["ðŸŸ¦", "ðŸŸ¥", "ðŸŸ¥"], ["ðŸŸ¥", "ðŸŸ¥", "ðŸŸ¦"]], 3, 2], "ðŸŸ¥ ðŸ’€"],
      [[[["ðŸŸ¥", "ðŸŸ¥", "ðŸŸ¥"], ["ðŸŸ¦", "ðŸŸ¦", "ðŸŸ¥"], ["ðŸŸ¥", "ðŸŸ¥", "ðŸŸ¦"]], 1, 3], "ðŸŸ¥ ðŸ’€"],
      [[[["ðŸŸ¥", "ðŸŸ¦", "ðŸŸ¥"], ["ðŸŸ¥", "ðŸŸ¥", "ðŸŸ¥"], ["ðŸŸ¥", "ðŸŸ¦", "ðŸŸ¥"]], 2, 3], "ðŸŸ¦ ðŸ¥³"],
      [[[["ðŸŸ¥", "ðŸŸ¥", "ðŸŸ¥"], ["ðŸŸ¦", "ðŸŸ¥", "ðŸŸ¥"], ["ðŸŸ¥", "ðŸŸ¥", "ðŸŸ¦"]], 3, 3], "ðŸŸ¦ ðŸ¥³"],
      [[[["ðŸŸ¥", "ðŸŸ¦", "ðŸŸ¦"], ["ðŸŸ¥", "ðŸŸ¥", "ðŸŸ¦"], ["ðŸŸ¥", "ðŸŸ¥", "ðŸŸ¥"]], 1, 1], "ðŸŸ¥ ðŸ’€"],
      [[[["ðŸŸ¥", "ðŸŸ¦", "ðŸŸ¦"], ["ðŸŸ¥", "ðŸŸ¥", "ðŸŸ¦"], ["ðŸŸ¥", "ðŸŸ¥", "ðŸŸ¥"]], 2, 2], "ðŸŸ¥ ðŸ’€"],
      [[[["ðŸŸ¥", "ðŸŸ¦", "ðŸŸ¦"], ["ðŸŸ¥", "ðŸŸ¥", "ðŸŸ¦"], ["ðŸŸ¥", "ðŸŸ¥", "ðŸŸ¥"]], 3, 3], "ðŸŸ¥ ðŸ’€"],
    ])
    runTests('CHALLENGE 3 - booleanize', booleanize, [
      [[{ bad1: null }], {}],
      [[{ bad1: null, bad2: null }], {}],
      [[{ '0123456789': 1 }], 'shorten all prop names to 9 chars or less'],
      [[{ a: 1, b: 1 }], { a: true, b: true }],
      [[{ a: 0, b: 0 }], { a: false, b: false }],
      [[{ a: 1, b: 0, c: null, d: 'Lady Gaga' }], { a: true, b: false, d: 'Lady Gaga' }],
    ])
    runTests('CHALLENGE 4 - scrub', scrub, [
      [["out of the silent planet", ["of", "silent"]], "out xx the xxxxxx planet"],
      [["out of the silent planet", ["of", "planet"]], "out xx the silent xxxxxx"],
      [["the ghost of the navigator", ["the"]], "xxx ghost of xxx navigator"],
      [["lost somewhere in time", []], "lost somewhere in time"],
      [["aces high", ["high", "aces", "hearts"]], "xxxx xxxx"],
      [["", ["high", "aces"]], ""],
    ])
    runTests('CHALLENGE 5 (OPTIONAL) - normalizePhoneNumber', normalizePhoneNumber, [
      [["1234567890"], "(123) 456-7890"],
      [["1111111111"], "(111) 111-1111"],
      [["9876543210"], "(987) 654-3210"],
    ])
    console.log('\nCHALLENGE 6 (OPTIONAL) does not have auto tests - diceRolls')
    function runTests(testName, func, tests) {
      let results = []
      tests.forEach(test => {
        const originalArgsList = _.cloneDeep(test[0])
        const argsList = test[0]
        const expected = test[1]
        const actual = func.apply(null, argsList)
        results.push([argsList, expected, actual, originalArgsList])
      })
      console.log('\n' + testName)
      if (results.every(result => _.isEqual(result[1], result[2]))) console.log('\tâœ… All tests pass')
      else if (results.every(result => !_.isEqual(result[1], result[2]))) console.log('\tâŒ All tests fail')
      else results.forEach((result, idx) => {
        if (_.isEqual(result[1], result[2])) console.log(`\tâœ… Test ${idx + 1} passes`)
        else console.log(`\tâŒ Test ${idx + 1} fails:
           ${func.name}(${result[3].map(JSON.stringify)})
           ðŸ‘‰ should return ${JSON.stringify(result[1])}
           ðŸ‘‰ but returns ${JSON.stringify(result[2])}`)
      })
    }
    const gridElems = [Array.from(row1.children), Array.from(row2.children), Array.from(row3.children)]
    const squares = ["ðŸŸ¥", "ðŸŸ¦"]
    let grid = [[], [], []]
    gridElems.forEach((row, idxRow) => {
      row.forEach((square, idxSquare) => {
        const emoji = squares[Math.floor(Math.random() * 2)]
        grid[idxRow].push(emoji)
        if (emoji === squares[0]) square.style.backgroundColor = '#ffecec'
        else square.style.backgroundColor = '#f2f2ff'
        square.onclick = () => {
          const x = idxSquare + 1
          const y = idxRow + 1
          console.log(`\nYou clicked coordinates [${x}, ${y}]`)
          outcome.textContent = mineSweeper(grid, x, y)
        }
      })
    })
    phoneNumInput.oninput = evt => {
      normalized.textContent = normalizePhoneNumber(evt.target.value)
    }
  </script>
</body>

</html>
